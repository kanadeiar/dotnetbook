@page "/core"
@inject BookService BookService
@layout CoreLayout

<PageTitle>@Name - .NET книга</PageTitle>

<div class="border-1 bg-light shadow rounded-1 p-2">
    <hr/>
    <h1>@Name</h1>
    <hr />
    @if (Parts is { })
    {
        foreach (var part in Parts)
        {
            <h4 class="mt-3 mb-0">@(part.Name)</h4>
            foreach (var item in part.Items)
            {
                <p class="my-0">
                    <NavLink href="@($"core/{item.Id}")" class="link-success">
                        @(item.Name)
                    </NavLink>
                </p>
            }
        }
    }
</div>

@code {
    private int bookId = 1;
    private string? Name { get; set; }
    private IEnumerable<Part>? Parts { get; set; }
    protected override void OnInitialized()
    {
        var book = BookService.GetBook(bookId);
        Name = book?.Name;
        Parts = book?.Parts ?? Array.Empty<Part>();
    }
}

